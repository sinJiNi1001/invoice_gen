{% extends "base.html" %}
{% block content %}
<div class="container mt-4" style="font-family: 'Calibri', sans-serif;">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">{{ 'Edit Project' if project else 'New Project' }}</h4>
                    <a href="{{ url_for('list_projects') }}" class="btn btn-sm btn-light">Back</a>
                </div>
                <div class="card-body">
                    <form method="post">
                        
                        <div class="mb-3">
                            <label class="form-label">Project Name *</label>
                            <input type="text" name="project_name" class="form-control" value="{{ project.project_name if project else '' }}" required>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Customer *</label>
                                <select name="customer_id" class="form-select" required>
                                    <option value="">Select Customer</option>
                                    {% for c in customers %}
                                    <option value="{{ c.id }}" {% if project and project.customer_id == c.id %}selected{% endif %}>
                                        {{ c.company_name }}
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">PO Number / Code</label>
                                <input type="text" name="po_number" class="form-control" value="{{ project.po_number if project else '' }}">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Total Value</label>
                                <input type="number" step="0.01" name="total_value" class="form-control" value="{{ project.total_value if project else '' }}">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Currency</label>
                                <select name="currency" class="form-select">
                                    <option value="INR" {% if not project or project.currency == 'INR' %}selected{% endif %}>INR</option>
                                    <option value="USD" {% if project and project.currency == 'USD' %}selected{% endif %}>USD</option>
                                    <option value="EUR" {% if project and project.currency == 'EUR' %}selected{% endif %}>EUR</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">Payment Type</label>
                                <select name="payment_type" class="form-select">
                                    <option value="Milestone" {% if not project or project.payment_type == 'Milestone' %}selected{% endif %}>Milestone</option>
                                    <option value="Monthly" {% if project and project.payment_type == 'Monthly' %}selected{% endif %}>Monthly</option>
                                    <option value="One-time" {% if project and project.payment_type == 'One-time' %}selected{% endif %}>One-time</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Start Date</label>
                                <input type="date" name="start_date" class="form-control" value="{{ project.start_date if project else today }}">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Status</label>
                                <select name="status" class="form-select">
                                    <option value="Active" {% if not project or project.status == 'Active' %}selected{% endif %}>Active</option>
                                    <option value="Completed" {% if project and project.status == 'Completed' %}selected{% endif %}>Completed</option>
                                    <option value="On Hold" {% if project and project.status == 'On Hold' %}selected{% endif %}>On Hold</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea name="description" class="form-control" rows="3">{{ project.description if project else '' }}</textarea>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">Save Project</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}